<!DOCTYPE html>
<html lang=zh-CN>
  <head>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1397140104815157"
     crossorigin="anonymous"></script>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="django 新增环境 123apt install python3-venvpython3 -m venv django4source django4&#x2F;bin&#x2F;active 安装Django 1pip install django  -i http:&#x2F;&#x2F;pypi.douban.com&#x2F;simple&#x2F; --trusted-host&#x3D;pypi.douban.com&#x2F;simple  创建和初始化项目">
<meta property="og:type" content="article">
<meta property="og:title" content="django和adminlte笔记">
<meta property="og:url" content="https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="运维少年">
<meta property="og:description" content="django 新增环境 123apt install python3-venvpython3 -m venv django4source django4&#x2F;bin&#x2F;active 安装Django 1pip install django  -i http:&#x2F;&#x2F;pypi.douban.com&#x2F;simple&#x2F; --trusted-host&#x3D;pypi.douban.com&#x2F;simple  创建和初始化项目">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-01-03T01:26:27.000Z">
<meta property="article:modified_time" content="2024-01-23T18:35:49.254Z">
<meta property="article:author" content="运维少年">
<meta property="article:tag" content="django">
<meta property="article:tag" content="adminlte">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    
      <title>运维少年·django和adminlte笔记</title>
    
    
    <!-- styles -->

    <!-- 默认CSS引入方法 -->
    
<link rel="stylesheet" href="/css/layout.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	


  
  <!-- L2Dwidget -->
  
<script src="/lib/live2d/L2Dwidget.min.js"></script>


  <script>
  // 猫
  L2Dwidget.init({
    model: {
      jsonPath: "/lib/live2d/tororo/assets/tororo.model.json",
    },
    display: {
      superSample: 2,
      width: 60,
      height: 80,
      position: 'right',
      hOffset: 0,
      vOffset: 20,
    },
    mobile: {
      show: true,
      scale: 1,
      motion: true,
    },
    react: {
      opacityDefault: 1,
      opacityOnHover: 1,
    }
  })
  //百度搜索爬虫



var _hmt = _hmt || [];
(function () {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7e9a19e5e700f1a2607b47c7bd6b35e8";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();

  </script>
  <meta name="baidu-site-verification" content="code-dIan6MAmy5" />
  

  <!-- styles -->


 
  <link
    rel="preload"
    href="/lib/font-awesome/css/all.min.css"
    as="style"
    onload="this.onload=null;this.rel='stylesheet'"
  />
  <noscript
    ><link
      rel="stylesheet"
      href="/lib/font-awesome/css/all.min.css"
  /></noscript>



<meta name="generator" content="Hexo 7.0.0"></head>


    <body class="max-width mx-auto">
     <div class="home">
        <!-- //actions_desktop 右上角导航栏 -->
      <aside id="#aside" class="hubzy_left">
        
          <div class="hubzy_logo">
	<a href="/">
		
		  
					<div id="logo" style="background-image: url(/images/logo.png);"></div>
					
					  
	  </a>
	  <div id="title">
		<a href="/">
		  <h1>
			运维少年
		  </h1>
		</a>
		
			<!-- icon列表 -->
			  <p class="iconlist">
				<!-- # > index.find_me_on -->
				
				
				
				
				  
					<a class="icon" target="_blank" rel="noopener" href="https://github.com/51yunwei/" aria-label="github">
					  <i class="fab fa-github"></i></a>
					  
			  
				  
				
			  </p>
			
	  </div>
</div>
<!-- 搜索栏 -->
<div id="search">
	<input class="search-input" type="text" placeholder="search">
	<span id="search-icon" class="fa fa-bars" title="展开目录"></span>
</div>

<!-- 侧边目录栏 -->
<div id="tree">
	

	
					<ul>
						<li class="file">
							<a href="/s/Github-Page-Hexo-搭建个人博客问题小记/">
								<i class="fa fa-file"></i>
								Github-Page-Hexo-搭建个人博客问题小记
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/Linux创建证书/">
								<i class="fa fa-file"></i>
								Linux创建证书
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/adminlte中使用时间插件/">
								<i class="fa fa-file"></i>
								adminlte中使用时间插件
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file active">
							<a href="/s/django和adminlte笔记/">
								<i class="fa fa-file"></i>
								django和adminlte笔记
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/django在windows上开机自启动和打开网页/">
								<i class="fa fa-file"></i>
								django在windows上开机自启动和打开网页
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/django将查询结果转换为字典/">
								<i class="fa fa-file"></i>
								django将查询结果转换为字典
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/hello-world/">
								<i class="fa fa-file"></i>
								hello-world
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/modal中使用form/">
								<i class="fa fa-file"></i>
								modal中使用form
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/在adminlte中使用datatable/">
								<i class="fa fa-file"></i>
								在adminlte中使用datatable
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/在adminlte中使用select2/">
								<i class="fa fa-file"></i>
								在adminlte中使用select2
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/测试图片/">
								<i class="fa fa-file"></i>
								测试图片
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/测试文章/">
								<i class="fa fa-file"></i>
								测试文章
							</a>
						</li>
					</ul>
	
					<ul>
						<li class="file">
							<a href="/s/清除模态框form的内容/">
								<i class="fa fa-file"></i>
								清除模态框form的内容
							</a>
						</li>
					</ul>
	
</div>

        
      </aside>
      <div id="header-post" class="hubzy_right">
        
          
  <!-- <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a> -->
  <!-- <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a> -->
  <!-- <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"
    style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a> -->
  <span id="menu">
    <span id="nav">
      <ul>
        
          <li><a href="/">
              首页
            </a></li>
          
          <li><a href="/categories/">
              文章分类
            </a></li>
          
      </ul>
    </span>
    <br />
    <div id="toc">
      
    </div>
    <br />
    <span id="actions">
      <ul>
        <!--// 
          <li><a class="icon" aria-label="上一篇 " href="/s/Linux%E5%88%9B%E5%BB%BA%E8%AF%81%E4%B9%A6/"><i
                class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();"
                onmouseout="$('#i-prev').toggle();"></i></a></li>
          
            
              <li><a class="icon" aria-label="下一篇 " href="/s/%E6%B5%8B%E8%AF%95%E5%9B%BE%E7%89%87/"><i
                    class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();"
                    onmouseout="$('#i-next').toggle();"></i></a></li>
              // -->
                <li><a class="icon" aria-label="返回顶部 " href="#"
                    onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up"
                      aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a>
                </li>
                <li><a class="icon" aria-label="分享文章 " href="#"><i class="fas fa-share-alt"
                      aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();"
                      onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">
        上一篇
      </span>
      <span id="i-next" class="info" style="display:none;">
        下一篇
      </span>
      <span id="i-top" class="info" style="display:none;">
        返回顶部
      </span>
      <span id="i-share" class="info" style="display:none;">
        分享文章
      </span>
    </span>
    <br />
    <div id="share" style="display: none">
      <ul>
  <li> 开发中. </li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&text=django和adminlte笔记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&is_video=false&description=django和adminlte笔记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=django和adminlte笔记&body=Check out this article: https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&name=django和adminlte笔记&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&t=django和adminlte笔记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li> -->

</ul>

    </div>

  </span>

        
      </div>
       
      <div class="content  hubzy_center">
        
          <!-- //body 引入首页和md编译后的页面 -->
          <!-- md 编译成 html 后的文件模板 -->

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="hubzy_center_title">
    
    <h1 class="posttitle" itemprop="name headline">
        django和adminlte笔记
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">运维少年</span>
      </span>
      <!-- 文章时间和首页时间 -->

    <div class="postdate">
      
        <time datetime="2024-01-03T01:26:27.000Z" itemprop="datePublished">2024-01-03</time>
        
        <!-- (Updated: <time datetime="2024-01-23T18:35:49.254Z" itemprop="dateModified">2024-01-23</time>) -->
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/django/">django</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/adminlte/" rel="tag">adminlte</a>, <a class="tag-link-link" href="/tags/django/" rel="tag">django</a>
    </div>


    </div>

  </header>
  

  <div class="content conterDiy"  id="article" itemprop="articleBody">
    <em class="nubScript">
    </em>
    <h1>django</h1>
<h2 id="新增环境">新增环境</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install python3-venv</span><br><span class="line">python3 -m venv django4</span><br><span class="line"><span class="built_in">source</span> django4/bin/active</span><br></pre></td></tr></table></figure>
<h2 id="安装Django">安装Django</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django  -i http://pypi.douban.com/simple/ --trusted-host=pypi.douban.com/simple </span><br></pre></td></tr></table></figure>
<h2 id="创建和初始化项目">创建和初始化项目</h2>
<p>创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite</span><br></pre></td></tr></table></figure>
<p>修改settings文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os <span class="comment"># 新增</span></span><br><span class="line">ALLOWED_HOSTS = [<span class="string">&#x27;*&#x27;</span>] <span class="comment">#修改</span></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR,<span class="string">&#x27;templates&#x27;</span>)], <span class="comment">#修改</span></span><br><span class="line">        <span class="string">&#x27;APP_DIRS&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;context_processors&#x27;</span>: [</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.debug&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.request&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 以下为修改</span></span><br><span class="line">LANGUAGE_CODE = <span class="string">&#x27;zh-hans&#x27;</span></span><br><span class="line">TIME_ZONE = <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">USE_TZ = <span class="literal">False</span></span><br><span class="line"><span class="comment"># 新增static</span></span><br><span class="line">STATICFILES_DIRS = [</span><br><span class="line">    os.path.join(BASE_DIR, <span class="string">&quot;static&quot;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>新增文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> 项目目录/templates 项目目录/static</span><br></pre></td></tr></table></figure>
<h2 id="自定义用户模型">自定义用户模型</h2>
<p>新建一个app</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp manager</span><br></pre></td></tr></table></figure>
<p>注册到settings.py中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;manager&#x27;</span>, <span class="comment">#新增</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>修改manager/models.py，根据自己的需要修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> BaseUserManager,AbstractUser</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="comment"># 自定义user，还需要在setting文件中配置AUTH_USER_MODELS</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDB</span>(<span class="title class_ inherited__">AbstractUser</span>):</span><br><span class="line">    uid = models.UUIDField(primary_key=<span class="literal">True</span>,default=uuid.uuid4)</span><br><span class="line">    username = models.CharField(max_length=<span class="number">15</span>,verbose_name=<span class="string">&quot;用户名&quot;</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    phone = models.CharField(max_length=<span class="number">11</span>,verbose_name=<span class="string">&quot;手机号码&quot;</span>, null=<span class="literal">True</span>,blank=<span class="literal">True</span>)</span><br><span class="line">    email = models.EmailField(verbose_name=<span class="string">&#x27;邮箱&#x27;</span>, null=<span class="literal">True</span>,blank=<span class="literal">True</span>)</span><br><span class="line">    create_time = models.DateTimeField(<span class="string">&#x27;创建时间&#x27;</span>,auto_now_add=<span class="literal">True</span>)</span><br><span class="line">    update_time = models.DateTimeField(<span class="string">&#x27;更新时间&#x27;</span>,auto_now=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        verbose_name = <span class="string">&#x27;用户信息&#x27;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.username</span><br></pre></td></tr></table></figure>
<p>编辑settings.py文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增自定义用户模型</span></span><br><span class="line">AUTH_USER_MODEL = <span class="string">&#x27;manager.UserDB&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="数据库迁移">数据库迁移</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成迁移文件</span></span><br><span class="line">python manage.py makemigrations</span><br><span class="line"><span class="comment">#应用迁移文件</span></span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>
<h2 id="创建用户">创建用户</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>管理员用户</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py createsuperuser</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>普通用户进入项目shell</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py shell</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User(用户数据库，默认为User，如果自定义了这里需要修改)</span><br><span class="line">User.objects.create_user(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;email@example.com&#x27;</span>, <span class="string">&#x27;password&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="站点验证和登录">站点验证和登录</h2>
<p>除了指定界面，用户访问其他界面时，如果没有登录就跳到登录界面，登录完成后跳转到需要访问的界面比如用户访问：<a target="_blank" rel="noopener" href="https://51yunwei.top/system/">https://51yunwei.top/system/</a> ，会跳转为 <a target="_blank" rel="noopener" href="https://51yunwei.top/login/?next=/system/%EF%BC%8C%E5%AE%8C%E6%88%90%E7%99%BB%E5%BD%95%E5%90%8E%EF%BC%8C%E8%B7%B3%E8%BD%AC%E5%9B%9Ehttps://51yunwei.top/system/">https://51yunwei.top/login/?next=/system/，完成登录后，跳转回https://51yunwei.top/system/</a><br>
此处代码来自运维咖啡吧，通过中间件的方式进行处理</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>新建一个目录</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> system/middleware -p</span><br><span class="line"><span class="built_in">cd</span> system/middleware</span><br><span class="line"><span class="built_in">touch</span> __init__.py</span><br><span class="line"><span class="built_in">touch</span> loginrequired.py</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>编辑loginrequired.py文件</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> redirect</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginRequiredMiddleware</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, get_response</span>): <span class="comment"># 启动django的时候会执行init，用get_resonpse来获取下一个中间件或视图函数的响应</span></span><br><span class="line">        self.get_response = get_response </span><br><span class="line">        self.login_url = settings.LOGIN_URL</span><br><span class="line">        self.open_urls = [self.login_url] + <span class="built_in">getattr</span>(settings, <span class="string">&#x27;OPEN_URLS&#x27;</span>, []) <span class="comment"># 登录界面和OPEN_URLS里面的路径都是开放的</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, request</span>): <span class="comment"># 每次有请求到达时，Django都会调用这个方法。</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> request.user.is_authenticated <span class="keyword">and</span> request.path_info <span class="keyword">not</span> <span class="keyword">in</span> self.open_urls:</span><br><span class="line">            <span class="keyword">return</span> redirect(self.login_url + <span class="string">&#x27;?next=&#x27;</span> + request.path)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self.get_response(request) <span class="comment"># 每个中间件都有一个get_response函数，这个函数会返回下一个中间件或视图函数的响应。</span></span><br></pre></td></tr></table></figure>
<p>OPEN_URLS：不需要验证就能访问到的界面<br>
LOGIN_URL：需要验证才能访问到的界面通过在settings中配置变量实现</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>编辑settings文件</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;,</span></span><br><span class="line">    <span class="string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;system.middleware.loginrequired.LoginRequiredMiddleware&#x27;</span>, <span class="comment"># 新增，根据自己的路径进行修改</span></span><br><span class="line">]</span><br><span class="line">&gt; 注意：验证的中间件要放最后面，因为最后一个中间件是第一个执行的。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增全局登录地址</span></span><br><span class="line">LOGIN_URL=<span class="string">&#x27;/login/&#x27;</span></span><br><span class="line">OPEN_URLS=[]</span><br></pre></td></tr></table></figure>
<h2 id="在登录的函数中拿到next地址，并返回，如下">在登录的函数中拿到next地址，并返回，如下</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LoginView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">if</span> request.user.is_authenticated:</span><br><span class="line">            <span class="keyword">return</span> render(request,<span class="string">&#x27;base.html&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="comment"># 判断用户登录</span></span><br><span class="line">        next_path = request.GET.get(<span class="string">&#x27;next&#x27;</span>,<span class="string">&#x27;/&#x27;</span>) <span class="comment"># 虽然是post方法，但还是可以用GET来获取路径的参数，即 ?key=value</span></span><br><span class="line">        username = request.POST.get(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">&#x27;password&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="comment"># print(&#x27;post next====&#x27;,request.POST.get(&#x27;next&#x27;,&#x27;&#x27;),request.POST)</span></span><br><span class="line">        user = authenticate(username=username,password=password)</span><br><span class="line">        <span class="keyword">if</span> user:</span><br><span class="line">            login(request,user)</span><br><span class="line">            request.session[<span class="string">&quot;username&quot;</span>] = username</span><br><span class="line">            request.session.set_expiry(<span class="number">0</span>)  <span class="comment"># 设置session过期时间为一周后</span></span><br><span class="line">            <span class="keyword">return</span> redirect(next_path)</span><br><span class="line">        login_error_message = <span class="string">&#x27;用户名或密码错误&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;登录失败&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;login.html&#x27;</span>,&#123;<span class="string">&#x27;login_error_message&#x27;</span>:login_error_message&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="返回函数">返回函数</h2>
<p>一些常见的视图返回函数的导入方式：</p>
<ol>
<li class="lvl-3">
<p><code>HttpResponse</code>：这是一个Django内置的HTTP响应类，可以直接从<code>django.http</code>模块导入。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p><code>HttpResponseRedirect</code>：这也是一个Django内置的HTTP响应类，可以直接从<code>django.http</code>模块导入。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br></pre></td></tr></table></figure>
<ol start="3">
<li class="lvl-3">
<p><code>render</code>：这是一个用于渲染模板并返回HTTP响应的函数，可以从<code>django.shortcuts</code>模块导入。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br></pre></td></tr></table></figure>
<ol start="4">
<li class="lvl-3">
<p><code>redirect</code>：这是一个用于返回重定向视图的函数，也可以从<code>django.shortcuts</code>模块导入。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> redirect</span><br></pre></td></tr></table></figure>
<ol start="5">
<li class="lvl-3">
<p><code>JsonResponse</code>：这是一个用于返回JSON格式HTTP响应的函数，可以从<code>django.http</code>模块导入。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br></pre></td></tr></table></figure>
<ol start="6">
<li class="lvl-3">
<p><code>Response</code>：这是Django REST Framework中的一个函数，用于返回HTTP响应，需要从<code>rest_framework.response</code>模块导入。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br></pre></td></tr></table></figure>
<ol start="7">
<li class="lvl-3">
<p><code>reverse</code></p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br></pre></td></tr></table></figure>
<h2 id="设置url">设置url</h2>
<p>在项目根urls.py中配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,include <span class="comment"># 新增include</span></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, include(<span class="string">&#x27;manager.urls&#x27;</span>)), <span class="comment"># 新增，app名称.urls</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://xn--appurls-qw3kg19de2rt2a417co16c.py">在app目录下新建urls.py</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.IndexView),</span><br><span class="line">    path(<span class="string">&#x27;user/&#x27;</span>,views.UserManager.as_view()),</span><br><span class="line">    path(<span class="string">&#x27;login/&#x27;</span>,views.LoginView.as_view()),</span><br><span class="line">    path(<span class="string">&#x27;user/&lt;uuid:uid&gt;/&#x27;</span>,views.UserDetail),</span><br><span class="line">    path(<span class="string">&#x27;logout/&#x27;</span>,views.LogOut),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="使用url模板标签生成路径">使用url模板标签生成路径</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>在url中配置name</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.IndexView),</span><br><span class="line">    path(<span class="string">&#x27;user/&#x27;</span>,views.UserManager.as_view(),name=<span class="string">&#x27;userlist&#x27;</span>), <span class="comment"># 配置name</span></span><br><span class="line">    path(<span class="string">&#x27;login/&#x27;</span>,views.LoginView.as_view()),</span><br><span class="line">    path(<span class="string">&#x27;user/&lt;uuid:uid&gt;/&#x27;</span>,views.UserDetail),</span><br><span class="line">    path(<span class="string">&#x27;logout/&#x27;</span>,views.LogOut),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>在前端文件使用</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;userlist&#x27; %&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 如果需要用到变量，year为变量 --&gt;</span></span><br><span class="line">&#123;% url &#x27;blog-list&#x27; year %&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>如果有多个相同名称的name，可以在urls.py中设置一个app_name来区分</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># manager/urls.py</span></span><br><span class="line">app_name=<span class="string">&#x27;manager&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;manager:userlist&#x27; %&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="获取post数据">获取post数据</h2>
<p>获取post数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username = request.POST.get(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>在post方法中也可以用GET</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="comment"># 判断用户登录</span></span><br><span class="line">        next_path = request.GET.get(<span class="string">&#x27;next&#x27;</span>,<span class="string">&#x27;/&#x27;</span>) <span class="comment"># 虽然是post方法，但还是可以用GET来获取路径的参数，即 ?key=value</span></span><br></pre></td></tr></table></figure>
<h2 id="登录和退出登录和session">登录和退出登录和session</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>登录和session</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> authenticate,login,logout</span><br><span class="line">username = request.POST.get(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">password = request.POST.get(<span class="string">&#x27;password&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment"># print(&#x27;post next====&#x27;,request.POST.get(&#x27;next&#x27;,&#x27;&#x27;),request.POST)</span></span><br><span class="line">user = authenticate(username=username,password=password)</span><br><span class="line"><span class="keyword">if</span> user:</span><br><span class="line">    login(request,user)</span><br><span class="line">    request.session[<span class="string">&quot;username&quot;</span>] = username <span class="comment"># 设置session</span></span><br><span class="line">    request.session.set_expiry(<span class="number">0</span>)  <span class="comment"># 关闭浏览器就过期</span></span><br><span class="line">    <span class="keyword">return</span> redirect(next_path)</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>退出登录</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> authenticate,login,logout</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">LogOut</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.user:</span><br><span class="line">        logout(request)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/login/&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="设置密码和检查密码">设置密码和检查密码</h2>
<p>设置密码使用set_password</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user.set_password(<span class="string">&#x27;xxxx&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>检查密码是否和输入的一致</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.hashers <span class="keyword">import</span> check_password</span><br><span class="line">check_password(request.POST.get(<span class="string">&#x27;currpassword&#x27;</span>),user.password)  <span class="comment"># 输入的密码，数据库中保存的密码</span></span><br></pre></td></tr></table></figure>
<h2 id="上传到github">上传到github</h2>
<p>1、生成requirements.txt文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; ./requirements.txt文件</span><br></pre></td></tr></table></figure>
<h2 id="设置全局可使用的变量">设置全局可使用的变量</h2>
<p>在template中，我们可以直接使用request变量，现在我们来设置一下可以直接使用的自定义变量<br>
system/systeminfo.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> manager.models <span class="keyword">import</span> SystemInfoDB</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">SystemInfo</span>(<span class="params">request</span>):</span><br><span class="line">    system_info = SystemInfoDB.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="keyword">if</span> system_info.count():</span><br><span class="line">        system_title = system_info.first().system_title <span class="keyword">if</span> system_info.first().system_title <span class="keyword">else</span> <span class="string">&#x27;未设置的title&#x27;</span></span><br><span class="line">        system_name = system_info.first().system_name <span class="keyword">if</span> system_info.first().system_name <span class="keyword">else</span> <span class="string">&#x27;未设置的系统名称&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        system_title = <span class="string">&#x27;未设置的title&#x27;</span></span><br><span class="line">        system_name = <span class="string">&#x27;未设置的系统名称&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;systeminfo&#x27;</span>:&#123;<span class="string">&#x27;system_title&#x27;</span>:system_title,<span class="string">&#x27;system_name&#x27;</span>:system_name&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>manager/models.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SystemInfoDB</span>(models.Model):</span><br><span class="line">    system_title = models.CharField(max_length=<span class="number">128</span>,verbose_name=<span class="string">&quot;网页title&quot;</span>)</span><br><span class="line">    system_name = models.CharField(max_length=<span class="number">128</span>,verbose_name=<span class="string">&quot;站点名称&quot;</span>)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        verbose_name = <span class="string">&#x27;系统信息&#x27;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.system_name</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://settings.py">settings.py</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR,<span class="string">&#x27;templates&#x27;</span>)],</span><br><span class="line">        <span class="string">&#x27;APP_DIRS&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;context_processors&#x27;</span>: [</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.debug&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.request&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;system.systeminfo.SystemInfo&#x27;</span>, <span class="comment"># 新增</span></span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>这样就可以直接在html中使用这个变量了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;&#123; systeminfo.system_title &#125;&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>adminlte</h1>
<h2 id="点击菜单加载页面后，菜单没有高亮">点击菜单加载页面后，菜单没有高亮</h2>
<p>在base.html添加以下代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// 选择所有class为&#x27;nav-sidebar&#x27;的ul元素下的li元素</span></span><br><span class="line">  $(<span class="string">&#x27;ul.nav-sidebar li&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params">i</span>)&#123;</span><br><span class="line">    <span class="comment">// 检查当前li元素的第一个子元素（即a标签）的href属性值是否为当前路径</span></span><br><span class="line">    <span class="keyword">if</span>($(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&#x27;a&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;href&#x27;</span>)===<span class="string">&#x27;&#123;&#123; request.path &#125;&#125;&#x27;</span>)&#123;</span><br><span class="line">        <span class="comment">// 如果条件满足，则为当前li元素的第一个子元素（即a标签）添加&#x27;active&#x27;类</span></span><br><span class="line">        $(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&#x27;a&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>优化版：比如用户管理一个菜单，里面有编辑用户、查看用户等，url为/user/xxxx/edit/、/user/xxx/detail/，这样的话上面的方法就不管用了，因为菜单是/user/，匹配不到/user/xxx/edit/，所以修改如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// 选择所有class为&#x27;nav-sidebar&#x27;的ul元素下的li元素</span></span><br><span class="line">  $(<span class="string">&#x27;ul.nav-sidebar li&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params">i</span>)&#123;</span><br><span class="line">    <span class="comment">// 把patharr切割为列表，如[user,xxxx,eidt]</span></span><br><span class="line">    <span class="keyword">var</span> patharr = <span class="string">&#x27;&#123;&#123; request.path &#125;&#125;&#x27;</span>.<span class="title function_">split</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    <span class="comment">// 循环列表</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = patharr.<span class="property">length</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="comment">// 获取列表的值，并转换为字符串</span></span><br><span class="line">      <span class="comment">// 比如一开始获取的值为 /user/xxx/edit/,如果没有匹配，下次循环为/user/xxx/，最后为/user/，只要有一个能匹配上，就把菜单高亮</span></span><br><span class="line">      <span class="keyword">var</span> newpatharr = patharr.<span class="title function_">slice</span>(<span class="number">0</span>, i);</span><br><span class="line">      <span class="keyword">var</span> path = newpatharr.<span class="title function_">join</span>(<span class="string">&quot;/&quot;</span>)+<span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(path)</span><br><span class="line">       <span class="comment">// 检查当前li元素的第一个子元素（即a标签）的href属性值是否为当前路径</span></span><br><span class="line">      <span class="keyword">if</span>($(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&#x27;a&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;href&#x27;</span>)===path)&#123;</span><br><span class="line">        <span class="comment">// 如果条件满足，则为当前li元素的第一个子元素（即a标签）添加&#x27;active&#x27;类</span></span><br><span class="line">        $(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&#x27;a&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="data-widget属性">data-widget属性</h2>
<p>AdminLTE框架中就使用data-widget属性来激活一些插件，如iframe插件、todo list插件等。</p>
<p>以下是一个使用data-widget属性的例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6&quot;</span> <span class="attr">id</span>=<span class="string">&quot;calendar_widget&quot;</span> <span class="attr">data-widget</span>=<span class="string">&quot;chat-init&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在这个例子中，data-widget=&quot;chat-init&quot;表示激活了一个名为&quot;chat-init&quot;的插件。</p>
<p>需要注意的是，data-widget属性并不是Bootstrap的标准属性，而是一些第三方框架（如AdminLTE）扩展出来的属性。因此，如果你在使用这些框架时遇到data-widget属性，可以参考相应的文档来了解其具体用法。</p>
<h2 id="ajax提交数据">ajax提交数据</h2>
<p>html代码如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;editUserForm&quot;</span> <span class="attr">novalidate</span>=<span class="string">&quot;novalidate&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; username &#125;&#125;&quot;</span> <span class="attr">readonly</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;Email&quot;</span>&gt;</span>邮箱地址<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; email &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;phone&quot;</span>&gt;</span>手机号码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; phone &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- /.card-body --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>修改&amp;保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;manager:userlist&#x27; %&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success float-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 返回列表<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ajax代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#editUserForm button[type=&#x27;submit&#x27;]&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>(); <span class="comment">// 阻止表单的默认提交行为</span></span><br><span class="line">    <span class="keyword">var</span> formData = $( <span class="string">&quot;#editUserForm&quot;</span> ).<span class="title function_">serialize</span>();</span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;&#123;% url &#x27;manager:useredit&#x27; uid %&#125;&quot;</span>, <span class="comment">// 你的请求地址</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;POST&quot;</span>, <span class="comment">// 请求类型，必须是POST</span></span><br><span class="line">        <span class="attr">data</span>: formData, <span class="comment">// 你的表单数据</span></span><br><span class="line">        <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>, <span class="comment">// 返回的数据类型，必须是json</span></span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 请求成功，显示消息</span></span><br><span class="line">                toastr.<span class="title function_">success</span>(data.<span class="property">message</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="number">1</span>) &#123;</span><br><span class="line">                toastr.<span class="title function_">success</span>(data.<span class="property">message</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">error</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">// 请求失败的回调函数</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>python代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self,request,uid</span>):</span><br><span class="line">    op_user = request.user</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> op_user.is_superuser <span class="keyword">or</span> op_user.uid != uid: <span class="comment"># 如果不是管理员或者修改的不是自己的用户信息</span></span><br><span class="line">        resultdict = &#123;<span class="string">&#x27;result&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;message&#x27;</span>:<span class="string">&#x27;无权限修改其他用户的信息&#x27;</span>&#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        user = UserDB.objects.<span class="built_in">filter</span>(uid=uid).first()</span><br><span class="line">        user.email = request.POST.get(<span class="string">&#x27;email&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        user.phone = request.POST.get(<span class="string">&#x27;phone&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        user.save()</span><br><span class="line">        resultdict = &#123;<span class="string">&#x27;result&#x27;</span>:<span class="number">0</span>,<span class="string">&#x27;message&#x27;</span>:<span class="string">&#x27;修改成功&#x27;</span>&#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> err :</span><br><span class="line">        resultdict = &#123;<span class="string">&#x27;result&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;message&#x27;</span>:<span class="string">&#x27;修改用户信息失败%s&#x27;</span> % err&#125;</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(resultdict)</span><br></pre></td></tr></table></figure>
<h2 id="吐司">吐司</h2>
<p>引入文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- toastr需要导入的css文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;adminlte/plugins/toastr/toastr.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;adminlte/plugins/sweetalert2/sweetalert2.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 吐司需要导入的js --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;adminlte/plugins/toastr/toastr.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;adminlte/plugins/sweetalert2/sweetalert2.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>初始化</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Toast</span> = <span class="title class_">Swal</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">            <span class="attr">toast</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;top-end&#x27;</span>,</span><br><span class="line">            <span class="attr">showConfirmButton</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">timer</span>: <span class="number">3000</span> # 多少秒后消失</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="返回上一个url">返回上一个url</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:history.go(-1);&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="在datatable头添加一个按钮，和search平行">在datatable头添加一个按钮，和search平行</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;#usertable&quot;</span>).<span class="title class_">DataTable</span>(&#123;</span><br><span class="line">      <span class="string">&quot;responsive&quot;</span>: <span class="literal">true</span>, <span class="string">&quot;lengthChange&quot;</span>: <span class="literal">false</span>, <span class="string">&quot;autoWidth&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;buttons&quot;</span>: [<span class="string">&quot;copy&quot;</span>, <span class="string">&quot;csv&quot;</span>, <span class="string">&quot;excel&quot;</span>, <span class="string">&quot;pdf&quot;</span>, <span class="string">&quot;print&quot;</span>, <span class="string">&quot;colvis&quot;</span>],</span><br><span class="line">      <span class="string">&quot;sDom&quot;</span>: <span class="string">&quot;&lt;&#x27;row&#x27;&lt;&#x27;col-md-6&#x27;&lt;&#x27;#toolbar&#x27;&gt;&gt;&lt;&#x27;col-md-6&#x27;f&gt;&gt;&quot;</span>,<span class="comment">//这里新增</span></span><br><span class="line">    &#125;).<span class="title function_">buttons</span>().<span class="title function_">container</span>().<span class="title function_">appendTo</span>(<span class="string">&#x27;#example1_wrapper .col-md-6:eq(0)&#x27;</span>);</span><br><span class="line">    $(<span class="string">&quot;#toolbar&quot;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;a href=&quot;&#123;% url &quot;manager:usercreate&quot; %&#125;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;&lt;i class=&quot;fa fa-plus-square&quot;&gt;&lt;/i&gt;&amp;nbsp&amp;nbsp新建主机&lt;/button&gt;&lt;/a&gt;&#x27;</span>) <span class="comment">//这里新增</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// document.querySelector(&#x27;div.toolbar&#x27;).innerHTML = &#x27;&lt;b&gt;Custom tool bar! Text/images etc.&lt;/b&gt;&#x27;;</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="post后url显示参数，如何修改？">post后url显示参数，如何修改？</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在form标签增加以下字段 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return false&quot;</span> &gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="提交数据后，通过request-POST获取不到">提交数据后，通过request.POST获取不到</h2>
<p>前端post后，django是通过标签中的name='xxx’获取到数据的，比如<input name='username'>，后端通过reqeust.POST.get(‘username’)获取数据所以template一定要设置name属性</p>
<h2 id="自定义模态框的内容">自定义模态框的内容</h2>
<p>模态框html，id为mymodal</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模态框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mymodal&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none;&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mymodaltitle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;mymodalcontent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer justify-content-between&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;mymodelhref&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: white;&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /.modal-content --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- /.modal-dialog --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 模态框结束 --&gt;</span></span><br></pre></td></tr></table></figure>
<p>js代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里用的是模态框的id</span></span><br><span class="line">  $(<span class="string">&#x27;#mymodal&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;show.bs.modal&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> button = $(event.<span class="property">relatedTarget</span>) <span class="comment">// Button that triggered the modal</span></span><br><span class="line">    <span class="comment">//注意这里的whatever对应前面html代码中button标签下data-whatever属性的后半段，这里只要定义了data-xxx，就可以通过js获取</span></span><br><span class="line">    <span class="comment">// var recipient = button.data(&#x27;whatever&#x27;) // Extract info from data-* attributes</span></span><br><span class="line">    <span class="comment">// If necessary, you could initiate an AJAX request here (and then do the updating in a callback).</span></span><br><span class="line">    <span class="comment">// Update the modal&#x27;s content. We&#x27;ll use jQuery here, but you could use a data binding library or other methods instead.</span></span><br><span class="line">    <span class="keyword">var</span> modal = $(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="comment">//此处即为修改modal的标题，都是通过class获取</span></span><br><span class="line">    modal.<span class="title function_">find</span>(<span class="string">&#x27;.modal-title&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;退出登录&#x27;</span>)</span><br><span class="line">    modal.<span class="title function_">find</span>(<span class="string">&#x27;.modal-body p&#x27;</span>).<span class="title function_">text</span>(<span class="string">&quot;是否确认退出登录？&quot;</span>)</span><br><span class="line">    modal.<span class="title function_">find</span>(<span class="string">&#x27;.modal-footer a&#x27;</span>).<span class="title function_">text</span>(<span class="string">&quot;确认退出&quot;</span>)</span><br><span class="line">    modal.<span class="title function_">find</span>(<span class="string">&#x27;.modal-footer a&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;&#123;% url &#x27;manager:logout&#x27; %&#125;&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>按钮的html只要设置了<code>data-toggle=&quot;modal&quot; data-target=&quot;#mymodal&quot;</code>就行，其中<code>data-target</code>是要弹出的模态框</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>  <span class="attr">href</span>=<span class="string">&quot;/logout/&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;logoutbtn&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#mymodal&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="jQuery表单校验">jQuery表单校验</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;&#123;% static &#x27;adminlte/plugins/jquery-validation/jquery.validate.min.js&#x27; %&#125;&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;adminlte/plugins/jquery-validation/additional-methods.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ajax提交的时候要验证一下</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$(<span class="string">&quot;#createUserForm button[type=&#x27;submit&#x27;]&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            e.<span class="title function_">preventDefault</span>(); <span class="comment">// 阻止表单的默认提交行为</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (!$(<span class="string">&quot;#createUserForm&quot;</span>).<span class="title function_">valid</span>()) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">// 如果验证失败，返回false，不提交数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> formData = $( <span class="string">&quot;#createUserForm&quot;</span> ).<span class="title function_">serialize</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $.<span class="title function_">ajax</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">url</span>: <span class="string">&quot;&#123;% url &#x27;manager:usercreate&#x27; %&#125;&quot;</span>, <span class="comment">// 你的请求地址</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">type</span>: <span class="string">&quot;POST&quot;</span>, <span class="comment">// 请求类型，必须是POST</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">data</span>: formData, <span class="comment">// 你的表单数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>, <span class="comment">// 返回的数据类型，必须是json</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="comment">// 请求成功，显示消息</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        toastr.<span class="title function_">success</span>(data.<span class="property">message</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="comment">// window.location.href = &quot;&#123;% url &#x27;manager:userlist&#x27; %&#125;&quot;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                          <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;&#123;% url &#x27;manager:userlist&#x27; %&#125;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        &#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        toastr.<span class="title function_">error</span>(data.<span class="property">message</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">error</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">// 请求失败的回调函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Error&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 验证规则</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$.validator.<span class="title function_">addMethod</span>(<span class="string">&quot;letterswithnumber&quot;</span>, <span class="keyword">function</span>(<span class="params">value,element</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">optional</span>(element) || <span class="regexp">/^(?=.*[a-z])(?=.*[0-9]).*$/i</span>.<span class="title function_">test</span>(value);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, <span class="string">&quot;密码中必须包含字母、数字和特殊字符&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $.validator.<span class="title function_">addMethod</span>(<span class="string">&quot;specialchar&quot;</span>, <span class="keyword">function</span>(<span class="params">value,element</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">optional</span>(element) || <span class="regexp">/^(?=.*[!@#\$%\^&amp;\*\(\)\-_=+&#123;&#125;:\,\&lt;\&gt;\?]).*$/i</span>.<span class="title function_">test</span>(value);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, <span class="string">&quot;密码中必须包含字母、数字和特殊字符&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&#x27;#createUserForm&#x27;</span>).<span class="title function_">validate</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">email</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">required</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">email</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">password</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">required</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">letterswithnumber</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">specialchar</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">minlength</span>: <span class="number">8</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">confirmpassword</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">required</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">equalTo</span>: <span class="string">&quot;#password&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">username</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">required</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">pattern</span>: <span class="regexp">/^[a-zA-Z0-9]+$/</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">minlength</span>: <span class="number">5</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">messages</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">email</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">email</span>: <span class="string">&quot;请输入正确的邮箱&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">password</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">required</span>: <span class="string">&quot;请提供密码&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">etterswithnumber</span>: <span class="string">&quot;密码中必须包含字母和数字&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">specialchar</span>: <span class="string">&quot;密码中必须包含特殊字符&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">minlength</span>: <span class="string">&quot;密码至少 8 个字符，至少包含三种符号&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">username</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">required</span>: <span class="string">&quot;请输入用户名&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">minlength</span>: <span class="string">&quot;用户名至少 5 个字符，仅允许字母和数字&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">confirmpassword</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">required</span>: <span class="string">&quot;请提供确认密码&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">equalTo</span>: <span class="string">&quot;确认密码与密码不一致&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">errorElement</span>: <span class="string">&#x27;span&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">errorPlacement</span>: <span class="keyword">function</span> (<span class="params">error, element</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            error.<span class="title function_">addClass</span>(<span class="string">&#x27;invalid-feedback&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            element.<span class="title function_">closest</span>(<span class="string">&#x27;.form-group&#x27;</span>).<span class="title function_">append</span>(error);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">highlight</span>: <span class="keyword">function</span> (<span class="params">element, errorClass, validClass</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $(element).<span class="title function_">addClass</span>(<span class="string">&#x27;is-invalid&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">unhighlight</span>: <span class="keyword">function</span> (<span class="params">element, errorClass, validClass</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $(element).<span class="title function_">removeClass</span>(<span class="string">&#x27;is-invalid&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="使用datatable">使用datatable</h2>
<p>html代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;usertable&quot;</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered table-striped&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">th</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">th</span>&gt;</span>创建时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">th</span>&gt;</span>邮箱<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">th</span>&gt;</span>手机号码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>js代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#usertable&#x27;</span>).<span class="title class_">DataTable</span>(&#123;</span><br><span class="line">                <span class="string">&quot;ajax&quot;</span>: <span class="string">&quot;&#123;% url &#x27;manager:userlist&#x27; %&#125;&quot;</span>,</span><br><span class="line">                <span class="string">&quot;columns&quot;</span>: [</span><br><span class="line">                    &#123;<span class="string">&quot;data&quot;</span>: <span class="string">&quot;username&quot;</span>&#125;,</span><br><span class="line">                    &#123;<span class="string">&quot;data&quot;</span>: <span class="string">&quot;create_time&quot;</span>&#125;,</span><br><span class="line">                    &#123;<span class="string">&quot;data&quot;</span>: <span class="string">&quot;email&quot;</span>&#125;,</span><br><span class="line">                    &#123;<span class="string">&quot;data&quot;</span>: <span class="string">&quot;phone&quot;</span>&#125;,</span><br><span class="line">                    &#123;<span class="string">&quot;data&quot;</span>: <span class="string">&quot;button&quot;</span>&#125;,</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">language</span>: &#123;<span class="comment">//自定义语言提示</span></span><br><span class="line">                    <span class="string">&quot;processing&quot;</span>: <span class="string">&quot;处理中...&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;lengthMenu&quot;</span>: <span class="string">&quot;显示 _MENU_ 条用户数据&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;zeroRecords&quot;</span>: <span class="string">&quot;没有找到相应的结果&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;info&quot;</span>: <span class="string">&quot;第 _START_ 至 _END_ 行，共 _TOTAL_ 行&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;infoEmpty&quot;</span>: <span class="string">&quot;第 0 至 0 项结果，共 0 项&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;infoFiltered&quot;</span>: <span class="string">&quot;(由 _MAX_ 项结果过滤)&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;infoPostFix&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;url&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;thousands&quot;</span>: <span class="string">&quot;&#x27;&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;emptyTable&quot;</span>: <span class="string">&quot;表中数据为空&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;loadingRecords&quot;</span>: <span class="string">&quot;载入中...&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;infoThousands&quot;</span>: <span class="string">&quot;,&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;paginate&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;first&quot;</span>: <span class="string">&quot;首页&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;previous&quot;</span>: <span class="string">&quot;上页&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;next&quot;</span>: <span class="string">&quot;下页&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;last&quot;</span>: <span class="string">&quot;末页&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                </span><br><span class="line">                <span class="string">&quot;sDom&quot;</span>: <span class="string">&quot;&lt;&#x27;row&#x27;&lt;&#x27;col-md-6&#x27;&lt;&#x27;#toolbar&#x27;&gt;&gt;&lt;&#x27;col-md-6&#x27;f&gt;&gt;&quot;</span> +  <span class="comment">//设置表格最上面内容，可以在这里添加按钮等其他设置</span></span><br><span class="line">        <span class="string">&quot;t&quot;</span> + <span class="comment">//设置tables</span></span><br><span class="line">        <span class="string">&quot;&lt;&#x27;row&#x27;&lt;&#x27;col-md-5 sm-center&#x27;li&gt;&lt;&#x27;col-md-7 text-right sm-center&#x27;p&gt;&gt;&quot;</span>,<span class="comment">//设置表格最下面显示内容</span></span><br><span class="line">                <span class="attr">buttons</span>: [&#123;</span><br><span class="line">                    <span class="attr">text</span>: <span class="string">&#x27;&lt;i class=&quot;fa fa-download&quot; title=&quot;导出execl&quot;&gt;&lt;/i&gt;&#x27;</span>,</span><br><span class="line">                    <span class="attr">extend</span>: <span class="string">&#x27;excel&#x27;</span>, <span class="comment">// 导出为execl</span></span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&#x27;用户列表&#x27;</span>+<span class="title class_">Date</span>.<span class="title function_">now</span>(), <span class="comment">// 导出文件的名字</span></span><br><span class="line">                    <span class="attr">className</span>: <span class="string">&#x27;btn btn-primary&#x27;</span>, <span class="comment">// 按钮样式</span></span><br><span class="line">                    <span class="attr">exportOptions</span>:&#123;</span><br><span class="line">                        <span class="attr">columns</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], <span class="comment">// 导出哪些列</span></span><br><span class="line">                        <span class="comment">// rows:[1,2,3,4] //导出哪些行</span></span><br><span class="line">                        <span class="attr">modifier</span>: &#123;</span><br><span class="line">                            <span class="attr">page</span>: <span class="string">&#x27;all&#x27;</span>, <span class="comment">// 导出哪些页的数据，all为所有，current为当前页</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="title class_">Headers</span>: <span class="literal">true</span>,<span class="comment">// 导出表格表头</span></span><br><span class="line">                        <span class="attr">footer</span>: <span class="literal">true</span>,<span class="comment">// 导出表格表尾</span></span><br><span class="line">                        <span class="attr">extension</span>: <span class="string">&quot;.xlsx&quot;</span>, <span class="comment">// 导出的文件后缀</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">          &#125;);</span><br><span class="line">          $(<span class="string">&quot;#toolbar&quot;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;a href=&quot;&#123;% url &quot;manager:usercreate&quot; %&#125;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;&lt;i class=&quot;fa fa-plus-square&quot;&gt;&lt;/i&gt;&amp;nbsp&amp;nbsp新建用户&lt;/button&gt;&lt;/a&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br></pre></td></tr></table></figure>
<p>后端代码，返回的格式UserDict[“data”]，data要和js的columns data名称一致</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">UserIndex</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">&#x27;user/index.html&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserManager</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="comment"># if not  request.META.get(&#x27;HTTP_X_REQUESTED_WITH&#x27;) == &#x27;XMLHttpRequest&#x27;:</span></span><br><span class="line">        <span class="comment">#     return render(request,&#x27;user/index.html&#x27;)</span></span><br><span class="line">        <span class="comment"># print(&#x27;not ajax request&#x27;)</span></span><br><span class="line">        UserInfo = UserDB.objects.<span class="built_in">all</span>()</span><br><span class="line">        <span class="comment"># print(user)</span></span><br><span class="line">        UserList = []</span><br><span class="line">        <span class="keyword">for</span> User <span class="keyword">in</span> UserInfo:</span><br><span class="line">            username = User.username</span><br><span class="line">            create_time =User.create_time</span><br><span class="line">            email = User.email</span><br><span class="line">            phone = User.phone</span><br><span class="line">            button = <span class="string">&quot;&quot;&quot;&lt;div style=&quot;display: block;text-align: center;margin: auto;&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;a class=&quot;btn btn-primary btn-sm&quot; href=&quot;&#123;0&#125;&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;i class=&quot;fas fa-folder&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;/i&gt;</span></span><br><span class="line"><span class="string">                                详情</span></span><br><span class="line"><span class="string">                            &lt;/a&gt;</span></span><br><span class="line"><span class="string">                            &lt;a class=&quot;btn btn-info btn-sm&quot; href=&quot;&#123;1&#125;&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;i class=&quot;fas fa-pencil-alt&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;/i&gt;</span></span><br><span class="line"><span class="string">                                编辑</span></span><br><span class="line"><span class="string">                            &lt;/a&gt;</span></span><br><span class="line"><span class="string">                            &lt;a class=&quot;btn btn-danger btn-sm&quot; data-url=&quot;&#123;2&#125;&quot; data-user=&#x27;&#123;3&#125;&#x27; data-toggle=&quot;modal&quot; data-target=&quot;#mymodal&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;i class=&quot;fas fa-trash&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;/i&gt;</span></span><br><span class="line"><span class="string">                                删除</span></span><br><span class="line"><span class="string">                            &lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span>.<span class="built_in">format</span>(reverse(<span class="string">&#x27;manager:userdetail&#x27;</span>,kwargs=&#123;<span class="string">&#x27;uid&#x27;</span>:User.uid&#125;),reverse(<span class="string">&#x27;manager:useredit&#x27;</span>,kwargs=&#123;<span class="string">&#x27;uid&#x27;</span>:User.uid&#125;),reverse(<span class="string">&#x27;manager:userdel&#x27;</span>,kwargs=&#123;<span class="string">&#x27;uid&#x27;</span>:User.uid&#125;),User.username)</span><br><span class="line">            UserList.append(&#123;<span class="string">&#x27;username&#x27;</span>: User.username,<span class="string">&#x27;create_time&#x27;</span>:User.create_time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>),<span class="string">&#x27;email&#x27;</span>:User.email,<span class="string">&#x27;phone&#x27;</span>: User.phone,<span class="string">&#x27;uid&#x27;</span>:<span class="built_in">str</span>(User.uid),<span class="string">&#x27;button&#x27;</span>:button&#125;)</span><br><span class="line">            <span class="built_in">print</span>(username)</span><br><span class="line"></span><br><span class="line">        UserDict = &#123;&#125;</span><br><span class="line">        UserDict[<span class="string">&quot;data&quot;</span>] = UserList</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> HttpResponse(json.dumps(UserDict))</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://urls.py">urls.py</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;user/&#x27;</span>,views.UserIndex,name=<span class="string">&#x27;userindex&#x27;</span>),</span><br><span class="line">path(<span class="string">&#x27;user/list/&#x27;</span>,views.UserManager.as_view(),name=<span class="string">&#x27;userlist&#x27;</span>),</span><br></pre></td></tr></table></figure>
<h2 id="刷新datatable的数据">刷新datatable的数据</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#usertable&#x27;</span>).<span class="title class_">DataTable</span>().<span class="property">ajax</span>.<span class="title function_">reload</span>();</span><br></pre></td></tr></table></figure>
<h2 id="截断datatable数据">截断datatable数据</h2>
<p>使用DataTables提供的ellipsis插件，它专门用于文本的截断显示。这个插件可以对过长的文本进行截断，并在结尾添加省略号。使用这个插件非常简单，首先需要在HTML中引入相应的JS文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.datatables.net/plug-ins/1.11.3/dataRender/ellipsis.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后在DataTables的配置中使用render.ellipsis方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#example&#x27;</span>).<span class="title class_">DataTable</span>(&#123;</span><br><span class="line">  <span class="comment">// 其他配置</span></span><br><span class="line">  <span class="string">&quot;columnDefs&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;targets&quot;</span>: [ <span class="number">0</span> ],</span><br><span class="line">      <span class="string">&quot;render&quot;</span>: $.fn.<span class="property">dataTable</span>.<span class="property">render</span>.<span class="title function_">ellipsis</span>( <span class="number">40</span> ) <span class="comment">// 截断长度为40个字符</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## datatables默认排序</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="string">&quot;order&quot;</span>: [[ <span class="number">1</span>, <span class="string">&quot;desc&quot;</span> ]]</span><br></pre></td></tr></table></figure>
<h2 id="bootstrap-switch监听按钮变化事件">bootstrap-switch监听按钮变化事件</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#userstat_value&quot;</span>).<span class="title function_">on</span>(<span class="string">&#x27;switchChange.bootstrapSwitch&#x27;</span>, <span class="keyword">function</span> (<span class="params">event,state</span>) &#123; </span><br><span class="line">      <span class="keyword">var</span> status = <span class="variable language_">this</span>.<span class="property">checked</span> ? <span class="string">&#x27;True&#x27;</span> : <span class="string">&#x27;False&#x27;</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userstat&#x27;</span>+status)</span><br><span class="line">      $(<span class="string">&#x27;input[name=&quot;userstat&quot;]&#x27;</span>).<span class="title function_">val</span>(status);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="文件上传">文件上传</h2>
<p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 不在form表单中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;logoimg&quot;</span>&gt;</span>站点图标(33x33)<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;file-loading&quot;</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;logoimg&quot;</span> <span class="attr">name</span>=<span class="string">&quot;logoimg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>js文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;&#123;% static &#x27;adminlte/plugins/bs-custom-file-input/bs-custom-file-input.js&#x27; %&#125;&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- bootstrap <span class="number">5.</span>x or <span class="number">4.</span>x is supported. <span class="title class_">You</span> can also use the bootstrap css <span class="number">3.3</span>.<span class="property">x</span> versions --&gt;</span><br><span class="line">&lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css&quot; crossorigin=&quot;anonymous&quot;&gt; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- default icons used in the plugin are from Bootstrap 5.x icon library (which can be enabled by loading CSS below) --&gt;</span><br><span class="line">&lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.min.css&quot; crossorigin=&quot;anonymous&quot;&gt; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- alternatively you can use the font awesome icon library if using with `fas` theme (or Bootstrap 4.x) by uncommenting below. --&gt;</span><br><span class="line">&lt;!-- link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.15.4/css/all.css&quot; crossorigin=&quot;anonymous&quot; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- the fileinput plugin styling CSS file --&gt;</span><br><span class="line">&lt;link href=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/css/fileinput.min.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- if using RTL (Right-To-Left) orientation, load the RTL CSS file after fileinput.css by uncommenting below --&gt;</span><br><span class="line">&lt;!-- link href=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/css/fileinput-rtl.min.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- the jQuery Library --&gt;</span><br><span class="line">&lt;!-- &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- buffer.min.js and filetype.min.js are necessary in the order listed for advanced mime type parsing and more correct</span><br><span class="line">     preview. This is a feature available since v5.5.0 and is needed if you want to ensure file mime type is parsed </span><br><span class="line">     correctly even if the local file&#x27;s extension is named incorrectly. This will ensure more correct preview of the</span><br><span class="line">     selected file (note: this will involve a small processing overhead in scanning of file contents locally). If you </span><br><span class="line">     do not load these scripts then the mime type parsing will largely be derived using the extension in the filename</span><br><span class="line">     and some basic file content parsing signatures. --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/plugins/buffer.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/plugins/filetype.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- piexif.min.js is needed for auto orienting image files OR when restoring exif data in resized images and when you</span><br><span class="line">    wish to resize images before upload. This must be loaded before fileinput.min.js --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/plugins/piexif.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- sortable.min.js is only needed if you wish to sort / rearrange files in initial preview. </span><br><span class="line">    This must be loaded before fileinput.min.js --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/plugins/sortable.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- bootstrap.bundle.min.js below is needed if you wish to zoom and preview file content in a detail modal</span><br><span class="line">    dialog. bootstrap 5.x or 4.x is supported. You can also use the bootstrap js 3.3.x versions. --&gt;</span><br><span class="line">&lt;!-- &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- the main fileinput plugin script JS file --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/fileinput.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- following theme script is needed to use the Font Awesome 5.x theme (`fas`). Uncomment if needed. --&gt;</span><br><span class="line">&lt;!-- script src=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/themes/fas/theme.min.js&quot;&gt;&lt;/script --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- optionally if you need translation for your language then include the locale file as mentioned below (replace LANG.js with your language locale) --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/locales/LANG.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  $(&quot;#logoimg&quot;).fileinput(&#123;</span><br><span class="line">        showUpload: true,  //显示上传按钮</span><br><span class="line">        dropZoneEnabled: false,</span><br><span class="line">        maxFileCount: 1, //最大选择的文件数</span><br><span class="line">        inputGroupClass: &quot;input-group-lg&quot;,</span><br><span class="line">        allowedFileExtensions: [&quot;png&quot;], // 允许的文件扩展名</span><br><span class="line">        language: &#x27;zh&#x27;,</span><br><span class="line">        uploadUrl: &quot;&#123;% url &#x27;manager:system&#x27; %&#125;&quot;, // 上传的URL</span><br><span class="line">        </span><br><span class="line">    &#125;).on(&quot;fileuploaded&quot;, function (e,data,previewId,index) &#123;</span><br><span class="line">                // 上传成功后触发的事件</span><br><span class="line">                toastr.success(&#x27;修改站点图标成功,当前界面可能有缓存,如未更新,请强制刷新一次&#x27;)</span><br><span class="line">                setTimeout(function() &#123;</span><br><span class="line">                    location.reload();</span><br><span class="line">                &#125;, 3000);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ace编辑器">ace编辑器</h3>
<p>引入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.3/ace.min.js</span><br></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;color: red;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>IP地址（选择黑/白名单时需配置，每行一个IP或网段，如1.1.1.1 或者 1.1.1.0/24）<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;form_content&quot;</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">pre</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:415px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;ace/ace.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ACE配置</span></span><br><span class="line">     <span class="keyword">var</span> editor = ace.<span class="title function_">edit</span>(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">     <span class="keyword">var</span> textarea = $(<span class="string">&#x27;textarea[name=&quot;content&quot;]&#x27;</span>).<span class="title function_">hide</span>();</span><br><span class="line">     editor.<span class="title function_">getSession</span>().<span class="title function_">on</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">       textarea.<span class="title function_">val</span>(editor.<span class="title function_">getSession</span>().<span class="title function_">getValue</span>());</span><br><span class="line">     &#125;);</span><br><span class="line">     editor.<span class="title function_">setShowPrintMargin</span>(<span class="literal">false</span>);</span><br><span class="line">     <span class="comment">// 字体大小</span></span><br><span class="line">     editor.<span class="title function_">setFontSize</span>(<span class="number">18</span>);</span><br><span class="line">     editor.<span class="title function_">resize</span>()</span><br></pre></td></tr></table></figure>
<h2 id="js换行">js换行</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> multiLineString = <span class="string">`这是第一行</span></span><br><span class="line"><span class="string">这是第二行`</span>;</span><br></pre></td></tr></table></figure>
    <p style="text-align: center;"> 感谢浏览，如对您有帮助或需联系我，欢迎关注我的微信公众号~</p>
    <!-- <img src="https://image-1252069448.cos.ap-hongkong.myqcloud.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/51yunwei-soso-2.png?q-sign-algorithm=sha1&q-ak=AKIDDHSiQEb3eaHx6oT2Ny0Bc7fWh1BKGWBKbqueidX3Nxe9u7gl0djZ217iW9nLlXDp&q-sign-time=1703923089;1703926689&q-key-time=1703923089;1703926689&q-header-list=host&q-url-param-list=ci-process&q-signature=7e425acf4632075fccd0912053362b7ff4390369&x-cos-security-token=6TpczuzaTL1cW0Be8tUv6fhVUSoAOYIa2ae3c671fe63fb51145fb4f34c07a84ezeMhuLR-Clxwx4f9NzVPxn4lAkTdEpIkTELYQSj2Rmh4zChWNo50yDmZ2omOvwl-BXSEHz14KAUH-t4Q4bFWdAl5omz7jV1Nf8gWlBR4_Db9UvnfehAGkiugHAmyFbHwo9U8OUmyCPqzm9nS11lpCuI9kha0ESy5vavzB8GLbEFgHTCf66G_MtAghCSbbxzI&ci-process=originImage"> -->
    <img src="/images/51yunwei-soso-2.png">
  </div>
</article>




          
          <!-- //actions_mobile 移动端导航栏 -->
            <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" class="Popup" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">文章分类</a></li>
        
      </ul>
    </div>

    <div id="toc-footer"  class="Popup" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">django</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">新增环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Django"><span class="toc-number">1.2.</span> <span class="toc-text">安装Django</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.</span> <span class="toc-text">创建和初始化项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.4.</span> <span class="toc-text">自定义用户模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB"><span class="toc-number">1.5.</span> <span class="toc-text">数据库迁移</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">1.6.</span> <span class="toc-text">创建用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%99%E7%82%B9%E9%AA%8C%E8%AF%81%E5%92%8C%E7%99%BB%E5%BD%95"><span class="toc-number">1.7.</span> <span class="toc-text">站点验证和登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%99%BB%E5%BD%95%E7%9A%84%E5%87%BD%E6%95%B0%E4%B8%AD%E6%8B%BF%E5%88%B0next%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%EF%BC%8C%E5%A6%82%E4%B8%8B"><span class="toc-number">1.8.</span> <span class="toc-text">在登录的函数中拿到next地址，并返回，如下</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.</span> <span class="toc-text">返回函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEurl"><span class="toc-number">1.10.</span> <span class="toc-text">设置url</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8url%E6%A8%A1%E6%9D%BF%E6%A0%87%E7%AD%BE%E7%94%9F%E6%88%90%E8%B7%AF%E5%BE%84"><span class="toc-number">1.11.</span> <span class="toc-text">使用url模板标签生成路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96post%E6%95%B0%E6%8D%AE"><span class="toc-number">1.12.</span> <span class="toc-text">获取post数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E5%92%8Csession"><span class="toc-number">1.13.</span> <span class="toc-text">登录和退出登录和session</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%E5%92%8C%E6%A3%80%E6%9F%A5%E5%AF%86%E7%A0%81"><span class="toc-number">1.14.</span> <span class="toc-text">设置密码和检查密码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%88%B0github"><span class="toc-number">1.15.</span> <span class="toc-text">上传到github</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E5%8F%AF%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-number">1.16.</span> <span class="toc-text">设置全局可使用的变量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">adminlte</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E8%8F%9C%E5%8D%95%E5%8A%A0%E8%BD%BD%E9%A1%B5%E9%9D%A2%E5%90%8E%EF%BC%8C%E8%8F%9C%E5%8D%95%E6%B2%A1%E6%9C%89%E9%AB%98%E4%BA%AE"><span class="toc-number">2.1.</span> <span class="toc-text">点击菜单加载页面后，菜单没有高亮</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#data-widget%E5%B1%9E%E6%80%A7"><span class="toc-number">2.2.</span> <span class="toc-text">data-widget属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ajax%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">2.3.</span> <span class="toc-text">ajax提交数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%90%E5%8F%B8"><span class="toc-number">2.4.</span> <span class="toc-text">吐司</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E4%B8%AAurl"><span class="toc-number">2.5.</span> <span class="toc-text">返回上一个url</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8datatable%E5%A4%B4%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%8C%89%E9%92%AE%EF%BC%8C%E5%92%8Csearch%E5%B9%B3%E8%A1%8C"><span class="toc-number">2.6.</span> <span class="toc-text">在datatable头添加一个按钮，和search平行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#post%E5%90%8Eurl%E6%98%BE%E7%A4%BA%E5%8F%82%E6%95%B0%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%EF%BC%9F"><span class="toc-number">2.7.</span> <span class="toc-text">post后url显示参数，如何修改？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%E5%90%8E%EF%BC%8C%E9%80%9A%E8%BF%87request-POST%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0"><span class="toc-number">2.8.</span> <span class="toc-text">提交数据后，通过request.POST获取不到</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%80%81%E6%A1%86%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">2.9.</span> <span class="toc-text">自定义模态框的内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jQuery%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C"><span class="toc-number">2.10.</span> <span class="toc-text">jQuery表单校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8datatable"><span class="toc-number">2.11.</span> <span class="toc-text">使用datatable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E6%96%B0datatable%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">2.12.</span> <span class="toc-text">刷新datatable的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%AA%E6%96%ADdatatable%E6%95%B0%E6%8D%AE"><span class="toc-number">2.13.</span> <span class="toc-text">截断datatable数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bootstrap-switch%E7%9B%91%E5%90%AC%E6%8C%89%E9%92%AE%E5%8F%98%E5%8C%96%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.14.</span> <span class="toc-text">bootstrap-switch监听按钮变化事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.15.</span> <span class="toc-text">文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ace%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">2.15.1.</span> <span class="toc-text">ace编辑器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#js%E6%8D%A2%E8%A1%8C"><span class="toc-number">2.16.</span> <span class="toc-text">js换行</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer"  class="Popup" style="display: none">
      <ul>
  <li> 开发中. </li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&text=django和adminlte笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&is_video=false&description=django和adminlte笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=django和adminlte笔记&body=Check out this article: https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&title=django和adminlte笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&name=django和adminlte笔记&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://www.51yunwei.top/s/django%E5%92%8Cadminlte%E7%AC%94%E8%AE%B0/&t=django和adminlte笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li> -->

</ul>

    </div>

    <div id="actions-footer">
        <span id="menu" Popup="#nav-footer" class="icon"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</span>
        <span id="toc" Popup="#toc-footer" class="icon"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</span>
        <span id="share" Popup="#share-footer" class="icon"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</span>
        <span id="top" Popup="" style="display:none" class="icon" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</span>
    </div>

  </div>
</div>

            <!-- 图片弹窗 -->
            <div class="img-pup" style="display: none;">
              <img>
            </div>
          

          <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2024
    运维少年
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">文章分类</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

          <!-- jquery -->
 
  
<script src="/lib/jquery/jquery.min.js"></script>



<script src="/lib/jquery/jquery.pjax.js"></script>



<!-- clipboard -->

   
    
<script src="/lib/clipboard/clipboard.min.js"></script>

  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
      setTimeout(()=>{
        e.trigger.setAttribute('aria-label', "复制到粘贴板!");
      },1500)
    })
  })
  </script>



<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

     
      </div>   
    </div>
      
    
<script src="/js/main.js"></script>

    </body>
    </html>